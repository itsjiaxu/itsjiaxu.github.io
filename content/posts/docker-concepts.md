---
title: Docker 总览
description: Docker concepts
publishedDate: 2025-08-13
tags:
  - documentation
  - docker
---

## 什么是 Docker

Docker 的英文翻译是 “搬运工” 的意思，他搬运的东西就是集装箱 Container，Container 里面装的是任意类型的 App，developer 可以通过 Docker 将 App 变成一种标准化的、可移植的、自管理的组件，我们可以在任何主流的操作系统中开发、调试和运行。

从概念上来看 Docker 和我们传统的虚拟机比较类似，只是更加轻量和方便，Docker 和虚拟机最主要的区别有以下几点：

- 虚拟化技术依赖的是物理 CPU 和内存，是硬件级别的；而 Docker 是构建在操作系统层面的，利用操作系统的容器化技术，所以 Docker 同样的可以运行在虚拟机上面。
- 虚拟机中的系统就是我们常说的操作系统镜像，比较复杂；而 Docker 比较轻量级， Docker 可以部署一个独立的 Redis，就类似于在虚拟机当中安装一个 Redis 应用，但是用 Docker 部署的应用是完全隔离的。
- 传统的虚拟化技术是通过快照来保存状态的；而 Docker 引入了类似于源码管理的机制，将容器的快照历史版本一一记录下来，切换成本非常低。
- 传统虚拟化技术在构建系统的时候非常复杂；而 Docker 可以通过一个简单的 Dockerfile 文件来构建整个容器，更重要的是 Dockerfile 可以手动编写，这样 developer 可以通过发布 Dockerfile 来定义应用的环境和依赖，这样对于持续交付非常有利。

## 容器化的核心优势

### 环境一致性

容器封装了应用程序运行所需的完整环境，包括：

- 运行时环境
- 系统库
- 依赖项
- 配置文件

确保应用在开发、测试、生产环境中的一致性运行。

### 快速部署与扩展

- 秒级启动时间
- 支持水平扩展
- 自动化部署流程
- 微服务架构支持

### 资源隔离与安全

- 进程级隔离
- 网络命名空间隔离
- 文件系统隔离
- 用户权限控制

## Docker 与传统虚拟化的对比

### 虚拟化层次差异

- 传统虚拟机：基于硬件级虚拟化，需要完整的客户操作系统，资源消耗较大。
  Docker 容器：基于操作系统级虚拟化，共享宿主机内核，资源利用率更高。

### 性能与资源优势

| 特性     | 传统虚拟机        | Docker 容器    |
| -------- | ----------------- | -------------- |
| 启动时间 | 分钟级            | 秒级           |
| 资源占用 | 高（包含完整 OS） | 低（共享内核） |
| 隔离级别 | 强隔离            | 进程级隔离     |
| 可移植性 | 受限于虚拟化平台  | 高度可移植     |

### 版本管理机制

- 传统虚拟机：通过快照进行状态保存，操作复杂且占用大量存储空间。
- Docker：采用分层镜像架构和版本控制机制，支持增量更新和快速回滚。

### 部署复杂度

- 传统虚拟机：需要复杂的系统配置和维护
- Docker：通过 Dockerfile 实现基础设施即代码（IaC），简化部署流程。

## Docker Engine 架构

### 核心组件

Docker Engine 采用客户端 - 服务器（C/S）架构，包含以下核心组件：

#### Docker Daemon (dockerd)

- 常驻后台进程
- 负责管理 Docker 对象（镜像、容器、网络、数据卷）
- 监听 Docker API 请求
- 执行容器生命周期管理

#### REST API Server

- 提供 RESTful API 接口
- 支持 HTTP/HTTPS 协议
- 实现客户端与守护进程的通信
- 支持远程访问

#### Docker CLI (docker)

- 命令行接口工具
- 与 REST API 进行交互
- 提供丰富的管理命令
- 支持脚本自动化

## Docker 系统架构

### 架构组件说明

```
┌─────────────────┐    ┌─────────────────┐
│   Docker CLI    │    │  Docker Client  │
└─────────┬───────┘    └─────────┬───────┘
          │                      │
          └──────────┬───────────┘
                     │ REST API
          ┌──────────▼───────────┐
          │   Docker Daemon      │
          │     (dockerd)        │
          └──────────┬───────────┘
                     │
    ┌────────────────┼────────────────┐
    │                │                │
    ▼                ▼                ▼
┌───────┐        ┌───────┐      ┌─────────┐
│Images │        │Network│      │ Volumes │
└───────┘        └───────┘      └─────────┘
    │                               │
    ▼                               ▼
┌─────────────────────────────────────────┐
│            Containers                   │
└─────────────────────────────────────────┘
```

## 底层技术支撑

### Linux Namespaces

提供进程级别的隔离机制：

- PID Namespace：进程 ID 隔离
- Network Namespace：网络接口隔离
- Mount Namespace：文件系统挂载点隔离
- UTS Namespace：主机名和域名隔离
- User Namespace：用户和用户组隔离
- IPC Namespace：进程间通信隔离

### Control Groups (CGroups)

实现资源限制和监控：

- CPU 使用限制
- 内存使用限制
- 磁盘 I/O 限制
- 网络带宽限制
- 设备访问控制

### Union File Systems

支持分层镜像存储：

- **AUFS**：Advanced Multi-Layered Unification Filesystem
- **OverlayFS**：现代 Linux 内核默认选择
- **Device Mapper**：基于块设备的存储驱动
- **Btrfs**：支持快照和克隆的文件系统
- **ZFS**：企业级文件系统

## 总结

Docker 通过容器化技术革命性地改变了应用部署和管理方式。其轻量级、可移植、易扩展的特性，使得现代软件开发和运维效率得到显著提升。了解 Docker 的架构和底层技术原理，对于构建高效、可靠的容器化应用至关重要。
